asyncapi: 3.0.0
info:
  title: Notification Service API
  version: 1.0.0
servers:
  localKafkaServer:
    host: localhost:9092
    protocol: kafka
channels:
  userRegistrationNotification:
    description: This channel contains a message per each user who signs up in our application.
    address: user-registration-notification
    messages:
      message:
        $ref: '#/components/messages/userRegistrationNotification'
  borrowedBookNotification:
    description: This channel contains a message per each book that is borrowed.
    address: borrowed-book-notification
    messages:
      message:
        $ref: '#/components/messages/borrowedBookNotification'
operations:
  onUserRegistrationNotification:
    action: receive
    channel:
      $ref: '#/channels/userRegistrationNotification'
  onBorrowedBookNotification:
    action: receive
    channel:
      $ref: '#/channels/borrowedBookNotification'
components:
  schemas:
    email:
      type: string
      format: email
      description: This property describes the email of the user
      examples:
        - john_doe@mail.com
    firstName:
      type: string
      description: This property describes the first name of the user
      examples:
        - John
    userRegistrationNotificationDto:
      type: object
      properties:
        firstName:
          $ref: '#/components/schemas/firstName'
        email:
          $ref: '#/components/schemas/email'
    borrowedBookNotificationDto:
      type: object
      properties:
        firstName:
          $ref: '#/components/schemas/firstName'
        email:
          $ref: '#/components/schemas/email'
        bookTitle:
          type: string
          description: This property describes the title of the borrowed book
          examples:
            - Book Name
  messages:
    userRegistrationNotification:
      payload:
        $ref: '#/components/schemas/userRegistrationNotificationDto'
    borrowedBookNotification:
      payload:
        $ref: '#/components/schemas/borrowedBookNotificationDto'